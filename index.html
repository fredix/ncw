<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>Ncw by nodecast</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Ncw</h1>
        <h2>nodecast agent worker</h2>

        <section id="downloads">
          <a href="https://github.com/nodecast/ncw/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/nodecast/ncw/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/nodecast/ncw" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h3>Welcome to Nodecast agent worker.</h3>

<p>NCW is an agent which is connected to <a href="http://nodecast.github.com/ncs/">NCS</a>. It is using <a href="http://www.zeromq.org">Zeromq</a> for communicate and monitoring.</p>

<p>NCW fork your worker, so it send to STDIN the payloads received from NCS, also it get the worker's response to STDOUT and send it to NCS.</p>

<h3>USAGE</h3>

<p>NCW needs three steps before using it.</p>

<ol>
<li>create a user into MongoDB</li>
</ol><p>create user collection in the <em>nodecast_prod</em> database (in the futur this is will be done through an HTTP API)</p>

<pre><code>doc = { login : 'user', email : 'user@email.com', authentication_token : 'token'}
db.users.insert(doc);
</code></pre>

<ol>
<li>create a node</li>
</ol><p>a node is to be identify the host where yours payloads come from. You should create a node for each physical or virtual server.</p>

<pre><code>$ curl -H X-nodename: "your-node-name" --user "email:token" http://ncs-ip:4567/node/create
</code></pre>

<p>return a node uuid :</p>

<pre><code>$ {"node_password":"e6cc13a3-1236-46cb-b40f-a66650ab5eef","node_uuid":"2d0a7780-e8fe-4e0a-89c6-a5a2737b095a"}
</code></pre>

<ol>
<li>create a workflow</li>
</ol><p>Nodecast need a workflow before scheduling your task.</p>

<pre><code>$ curl -H "X-workflow: test" -d '{ "worker1": 1, "worker2": 2 }' --user "user@email.com:token" http://127.0.0.1:4567/workflow/create
</code></pre>

<p>return a workflow uuid : </p>

<pre><code>$ {"uuid":"0ebcdab6-0263-42d3-be7d-9602fa15f68c"}
</code></pre>

<h3>LAUNCH</h3>

<p>Now your can launch NCW with node's uuid and workflow's uuid</p>

<pre><code>$ ncw --ncs-ip=127.0.0.1 --ncs-port=5569 --node-uuid=your-node-uuid --node-password=your-node-password --worker-type=service --worker-name="bttrack" --exec="yourworker.bin"
</code></pre>

<h3>Contact</h3>

<p><a href="https://github.com/fredix" class="user-mention">@fredix</a></p>

<p>email : fredix at nodecast do net</p>

<p>irc : #nodecast on irc.freenode.net</p>
      </section>
    </div>

    
  </body>
</html>